---
# vim: set filetype=yaml.ansible : #

- name: "Hyer | Install Debian"
  when: ansible_os_family == 'Debian'
  ansible.builtin.apt:
    name:
      - hyprland
      - hyprlock
      - hypridle
      - hyprpolkitagent
      - hyprpaper
      - hyprsysteminfo
      - waybar
      - SwayNotificationCenter
      - cliphist
      - grim
      - slurp
      - swappy
      - rofi-wayland
      - wlogout
      - Thunar
    state: present
  become: true

  # Install com.sidevesh.Luminance from git

- name: "Hyper | Install RedHat"
  when: ansible_os_family == 'Debian'
  ansible.builtin.dnf:
    name:
      - hyprland
      - hyprlock
      - hypridle
      - hyprpolkitagent
      - hyprpaper
      - hyprsysteminfo
      - waybar
      - SwayNotificationCenter
      - cliphist
      - grim
      - slurp
      - swappy
      - rofi-wayland
      - wlogout
      - Thunar
    state: present
  become: true

- name: "Hyper | Config folder"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.file:
    mode: "0755"
    path: "{{ ansible_user_dir }}/.config/hypr"
    state: directory
    recurse: true

- name: "Hyper | Rofi config folder"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.file:
    mode: "0755"
    path: "{{ ansible_user_dir }}/.config/rofi"
    state: directory
    recurse: true

- name: "Hyper | Swappy config folder"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.file:
    mode: "0755"
    path: "{{ ansible_user_dir }}/.config/swappy"
    state: directory
    recurse: true

- name: "Hyper | Waybar config folder"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.file:
    mode: "0755"
    path: "{{ ansible_user_dir }}/.config/waybar"
    state: directory
    recurse: true

- name: "Hyper | Wlogout config folder"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.file:
    mode: "0755"
    path: "{{ ansible_user_dir }}/.config/wlogout"
    state: directory
    recurse: true

- name: "Hyper | Wallpaper folder"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.file:
    mode: "0755"
    path: "{{ ansible_user_dir }}/wallpaper"
    state: directory
    recurse: true

- name: "Hyper | Copy config files"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.copy:
    src: "{{ role_path }}/files/hypr/"
    dest: "{{ ansible_user_dir }}/.config/hypr"
    mode: "0644"
    directory_mode: "0755"

- name: "Hyper | chmod script files"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.file:
    path: "{{ item }}"
    mode: "a+x"
  with_fileglob:
    - "{{ ansible_user_dir }}/.config/hypr/scripts/*"

- name: "Hyper | chmod gtk.sh files"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.file:
    path: "{{ ansible_user_dir }}/.config/hypr/gtk.sh"
    mode: "a+x"

- name: "Hyper | chmod sratrhypr.sh files"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.file:
    path: "{{ ansible_user_dir }}/.config/hypr/starthypr.sh"
    mode: "a+x"

- name: "Hyper | Rofi files"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.copy:
    src: "{{ role_path }}/files/rofi/"
    dest: "{{ ansible_user_dir }}/.config/rofi"
    mode: "0644"
    directory_mode: "0755"

- name: "Hyper | Swappy files"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.copy:
    src: "{{ role_path }}/files/swappy/"
    dest: "{{ ansible_user_dir }}/.config/swappy"
    mode: "0644"
    directory_mode: "0755"

- name: "Hyper | Waybar files"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.copy:
    src: "{{ role_path }}/files/waybar/"
    dest: "{{ ansible_user_dir }}/.config/waybar"
    mode: "0644"
    directory_mode: "0755"

- name: "Hyper | chmod sratrhypr.sh files"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.file:
    path: "{{ ansible_user_dir }}/.config/waybar/launch.sh"
    mode: "a+x"

- name: "Hyper | Wlogout files"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.copy:
    src: "{{ role_path }}/files/wlogout/"
    dest: "{{ ansible_user_dir }}/.config/wlogout"
    mode: "0644"
    directory_mode: "0755"

- name: "Hyper | Wallpaper files"
  when: ansible_os_family == 'Debian' or ansible_os_family == 'RedHat'
  ansible.builtin.copy:
    src: "{{ role_path }}/files/wallpaper/"
    dest: "{{ ansible_user_dir }}/wallpaper"
    mode: "0644"
    directory_mode: "0755"
